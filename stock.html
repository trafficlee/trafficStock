<!DOCTYPE html>
<html lang="zh-CN">
<head>
<title>Traffic</title>
<link rel="shortcut icon" href="images/t.png">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="Access-Control-Allow-Origin" content="*" />
<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="css/bootstrap.min.css" >
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="js/jquery-3.3.1.min.js" ></script>
<script src="js/bootstrap.min.js" ></script>
<script src="js/stockUtil.js" ></script>
<script src="js/echarts.min.js" ></script>
</head>

<style>
body{
	background-color:#F4F5F5
}

.container-fluid.head{
	background-color:white;
	height:65px;
}
.container-fluid.content{
	margin-top:30px;
}
.nav.nav-pills.nav{
	margin-top:13px;
}
.container-fluid.rightTop{
	background-color:white;
	border-top: 3px solid #6699ff;
	border-bottom: 1px solid #DCDCDC;
	text-align: center;
}
.container-fluid.left{
	background-color:white;
}
.container-fluid.middle{
	background-color:white;
}
.container-fluid.bottom{
	background-color:white;
}
.container-fluid.bottom.chart.none{
	//display:none;
	height:150px;
	width:100%;
	padding-left:0px;
	padding-right:0px;
}
.container-fluid.bottom.chart{
	height:100%;
	width:100%;
	padding-left:0px;
	padding-right:0px;
}
.container-fluid.tab{
	padding-left:0px;
	padding-right:0px;
}
.container-fluid.tab li{
	width:33.3%;
}
.container-fluid.dateTop{
	border-top: 3px solid #6699ff;
	border-bottom: 1px solid #DCDCDC;
}
.tab-content td{
    font-size: 11px;

}
.nav-tabs>li.active>a,.nav-tabs>li.active>a:focus,.nav-tabs>li.active>a:hover{
	font-weight:900;
	font-size: 15px;
	color:#337ab7;
	cursor:default;
	background-color:#fff;
	border:1px solid #ddd;
	border-bottom-color:transparent;
	
}

</style>

<body>
	
	<div class="container-fluid head"  >
		<ul class="nav nav-pills nav">
		  <li role="presentation" ><a href="#">Traffic-Stock</a></li>

		</ul>
	</div>
	
	<div class="container-fluid content"  >
		<div class="container" >
			<div class="row">
				<div class="col-xs-12 col-md-8">
					<div class="container-fluid left"  >1
					1</br>1
					1</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>1
					1</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>1
					1</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>1
					1</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>1
					1</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>11</br>1
					</div>
				</div>
				<div class="col-xs-12 col-md-4" >
					<div class="container-fluid"  >
						<div class="container-fluid rightTop">
							<h5 class="date" id="date"></h5>
						</div>
						<div class="container-fluid middle" >
							<div class="container-fluid tab">
								<ul class="nav nav-tabs" role="tablist">
									<li role="presentation" class="active"><a href="#AStock" aria-controls="home" role="tab" data-toggle="tab">A股</a></li>
									<li role="presentation"><a href="#HKStock" aria-controls="profile" role="tab" data-toggle="tab">港股</a></li>
									<li role="presentation"><a href="#USAStock" aria-controls="messages" role="tab" data-toggle="tab">美股</a></li>
								</ul>
								<div class="tab-content table-responsive">
									<div role="tabpanel" class="tab-pane active" id="AStock">
									<table class="table table-hover">
										<tr><td id="">股票名称</td><td id="">最新价格</td><td id="">涨跌</td><td id="">涨跌幅度</td></tr>
										<tr><td ><a id="AStockName" href="#"></a></td><td id="AStockValue"></td><td id="AStockRangeValue"></td><td id="AStockRangePercent"></td></tr>
									</table>
									<img src="" class="img-rounded"></img>
									</div>
									<div role="tabpanel" class="tab-pane" id="HKStock">
										<table class="table table-hover">
										<tr><td id="">股票名称</td><td id="">最新价格</td><td id="">涨跌</td><td id="">涨跌幅度</td></tr>
										<tr><td ><a id="HKStockName" href="#"></a></td><td id="HKStockValue"></td><td id="HKStockRangeValue"></td><td id="HKStockRangePercent"></td></tr>
									</table>
									</div>
									<div role="tabpanel" class="tab-pane" id="USAStock">
										<table class="table table-hover">
										<tr><td id="">股票名称</td><td id="">最新价格</td><td id="">涨跌</td><td id="">涨跌幅度</td></tr>
										<tr><td ><a id="USAStockName" href="#"></a></td><td id="USAStockValue"></td><td id="USAStockRangeValue"></td><td id="USAStockRangePercent"></td></tr>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class="container-fluid bottom" >

							<div id="chart" class="container-fluid bottom chart none" >
								
							</div>
							<div class="container-fluid bottom chart" >
								<img src="" id="stockImg" />
							</div>
							
							
						</div>
					</div>
					
				</div>
			</div>
		</div>
	</div>
<script>

	
	var day = getTimestamp("today");
	console.log(day);
	
	setInterval(function(){
		document.getElementById("date").innerHTML = getChineseDate();
	}
	,"1000");
	
	getStockBasic("AStock","sh000001");
	
	
	$('.nav-tabs>li>a').click(function (e) {
		var tabId = $(this)[0].hash.split("#")[1];
		var stockNum = "";
		
		switch(tabId){
			case "AStock":
			stockNum = "sh000001";
			break;
			case "HKStock":
			stockNum = "hkHSI";
			break;
			case "USAStock":
			stockNum = "usDJI";
			break;
		}
		
		getStockBasic(tabId,stockNum);
		
	});
	
	
	//$().timeSharing("sz002048");

	$.ajax({
		url:"https://gupiao.baidu.com/api/stocks/stocktimeline?from=pc&os_ver=1&cuid=xxx&vv=100&format=json&stock_code=sh000001",
		async:false,
		dataType:'JSONP',
		success:function(msg){ 
			console.log(msg) ;
			var valueArr = [];
			var data = msg.data.timeline.timeline;
			
			for(var i = 0 ; i < data.length; i ++){
				
				var numStr = data[i].values[4];
				var numDouble = parseFloat(numStr);
				var num = numDouble.toFixed(2);
				valueArr.push(num);

				//debugger;
			}
			console.log(valueArr);
			
			initChart(valueArr);
			
		}, 
		error:function(msg){ 
			console.log("timeSharing Error");
			console.log(msg) ;
		},
	}); 
	
function initChart(valueArr){
	

	
	var timeLineArr = [ "09:15","09:16", "09:17", "09:18", "09:19", "09:20", "09:21", "09:22", "09:23", "09:24", "09:25", "09:26", "09:27", "09:28", "09:29","09:30","09:31","09:32", "09:33", "09:34", "09:35", "09:36", "09:37", "09:38", "09:39", "09:40", "09:41", "09:42", "09:43", "09:44", "09:45", "09:46", "09:47", "09:48", "09:49", "09:50","09:51","09:52","09:53","09:54", "09:55","09:56","09:57","09:58","09:59","10:00","10:01","10:02","10:03","10:04","10:05","10:06","10:07","10:08","10:09","10:10","10:11","10:12","10:13","10:14","10:15","10:16","10:17","10:18","10:19","10:20","10:21","10:22","10:23","10:24","10:25","10:26","10:27","10:28","10:29","10:30","10:31","10:32","10:33","10:34","10:35","10:36","10:37","10:38","10:39","10:40","10:41","10:42","10:43","10:44","10:45","10:46","10:47","10:48","10:49","10:50","10:51","10:52","10:53","10:54","10:55","10:56","10:57","10:58","10:59","11:00","11:01","11:02","11:03","11:04","11:05","11:06","11:07","11:08","11:09","11:10","11:11","11:12","11:13","11:14","11:15","11:16","11:17","11:18","11:19","11:20","11:21","11:22","11:23","11:24","11:25","11:26","11:27","11:28","11:29","11:30","13:01","13:02","13:03","13:04","13:05","13:06","13:07","13:08","13:09","13:10","13:11","13:12","13:13","13:14","13:15","13:16","13:17","13:18","13:19","13:20","13:21","13:22","13:23","13:24","13:25","13:26","13:27","13:28","13:29","13:30","13:31","13:32","13:33","13:34","13:35","13:36","13:37","13:38","13:39","13:40","13:41","13:42","13:43","13:44","13:45","13:46","13:47","13:48","13:49","13:50","13:51","13:52","13:53","13:54","13:55","13:56","13:57","13:58","13:59","14:00","14:01","14:02","14:03","14:04","14:05","14:06","14:07","14:08","14:09","14:10","14:11","14:12","14:13","14:14","14:15","14:16","14:17","14:18","14:19","14:20","14:21","14:22","14:23","14:24","14:25","14:26","14:27","14:28","14:29","14:30","14:31","14:32","14:33","14:34","14:35","14:36","14:37","14:38","14:39","14:40","14:41","14:42","14:43","14:44","14:45","14:46","14:47","14:48","14:49","14:50","14:51","14:52","14:53","14:54","14:55","14:56","14:57","14:58","14:59","15:00"];

	option = {
		width:"80%",
		height:"70%",
		animation:false,
		title: {
			
		},
		grid:{
				top:"10",
				bottom:"10",
				left:"40",
				right:"30",
			},
		xAxis: {
			
			data: timeLineArr,
			type:"",
			axisLabel: {
				interval: 126
			},

		},
		yAxis: {
			scale: true,
			type: 'value',
			min: function(value) {
				return  parseInt(value.min - 10);
			},
			max: function(value) {
				return parseInt(value.max + 10);
			},
			axisTick:{
				length:1
			},
			minInterval :500,
			axisLabel: {
				margin: 3,
				
				textStyle: {
					color: '#999',
					fontSize: 12,
				}
			},
			splitLine :{
				
			},
		
		},
		series: [
			{
				type: 'line',
				data: valueArr,
				itemStyle : {
					normal : {
						lineStyle : {
							color : '#74C2D8'
						}
					}
				},
				areaStyle : {
				normal : {
					color : new echarts.graphic.LinearGradient(0, 0, 0, 1, [ {
						offset : 0,
						color : '#74C2D8'
					}, {
						offset : 1,
						color : '#FFFFFF'
					} ])
				}
			},
			},


		]
	};
	var myChart = echarts.init(document.getElementById('chart'));
	myChart.setOption(option);
	var src = myChart.getDataURL();
	document.getElementById("stockImg").src = src;
	document.getElementById("chart").style.display = "none";
}


	
</script>
	

	
</body>
</html>